{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./src/views/Comment/index.vue?6be5","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/internals/regexp-flags.js","webpack:///./src/views/Comment/index.vue?d383","webpack:///./src/api/comment.js","webpack:///src/views/Comment/index.vue","webpack:///./src/views/Comment/index.vue?e5c0","webpack:///./src/views/Comment/index.vue"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","STRICT_METHOD","module","exports","callbackfn","this","arguments","length","undefined","redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","name","R","p","String","rf","f","unsafe","METHOD_NAME","argument","method","that","result","ignoreCase","multiline","dotAll","unicode","sticky","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","path","_v","directives","rawName","value","expression","staticStyle","commentList","scopedSlots","_u","key","fn","scope","_s","row","comment_status","statusLoading","on","$event","onStatusChange","model","callback","$$v","$set","currentPage","pageSize","totalCount","loading","handleSizeChange","handleCurrentChange","staticRenderFns","getComment","params","request","url","updateComment","data","components","props","tableData","watch","computed","methods","val","loadComment","page","created","mounted","component"],"mappings":"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","file":"js/chunk-7fa1d8e4.06350b04.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=8339e84a&lang=less&scoped=true&\"","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comment-container\"},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_c('a',{attrs:{\"href\":\"/\"}},[_vm._v(\"评论管理\")])])],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"table-list\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.commentList,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"标题\"}}),_c('el-table-column',{attrs:{\"prop\":\"total_comment_count\",\"label\":\"总评论数\"}}),_c('el-table-column',{attrs:{\"prop\":\"fans_comment_count\",\"label\":\"粉丝评论数\"}}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"评论状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.comment_status ? \"正常\" : \"关闭\")+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"disabled\":scope.row.statusLoading},on:{\"change\":function($event){return _vm.onStatusChange(scope.row)}},model:{value:(scope.row.comment_status),callback:function ($$v) {_vm.$set(scope.row, \"comment_status\", $$v)},expression:\"scope.row.comment_status\"}})]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[10, 15, 20, 30],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.totalCount,\"disabled\":_vm.loading},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from \"@/utils/request.js\";\n\n//获取评论列表\nexport const getComment = (params) => {\n  return request({\n    method: \"GET\",\n    url: \"/mp/v1_0/articles\",\n    params,\n  });\n};\n\n//修改文章状态\nexport const updateComment = (params, data) => {\n  return request({\n    method: \"PUT\",\n    url: \"/mp/v1_0/comments/status\",\n    params,\n    data,\n  });\n};\n","<template>\n  <div class=\"comment-container\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <!-- 面包屑导航 -->\n        <el-breadcrumb separator=\"/\">\n          <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n          <el-breadcrumb-item><a href=\"/\">评论管理</a></el-breadcrumb-item>\n        </el-breadcrumb>\n      </div>\n      <!-- 评论渲染列表 -->\n      <el-table\n        :data=\"commentList\"\n        style=\"width: 100%\"\n        stripe\n        class=\"table-list\"\n        v-loading=\"loading\"\n      >\n        <el-table-column prop=\"title\" label=\"标题\"> </el-table-column>\n        <el-table-column prop=\"total_comment_count\" label=\"总评论数\">\n        </el-table-column>\n        <el-table-column prop=\"fans_comment_count\" label=\"粉丝评论数\">\n        </el-table-column>\n        <el-table-column prop=\"address\" label=\"评论状态\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.comment_status ? \"正常\" : \"关闭\" }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"address\" label=\"操作\">\n          <template slot-scope=\"scope\">\n            <!-- 开关按钮 -->\n            <el-switch\n              v-model=\"scope.row.comment_status\"\n              active-color=\"#13ce66\"\n              inactive-color=\"#ff4949\"\n              :disabled=\"scope.row.statusLoading\"\n              @change=\"onStatusChange(scope.row)\"\n            >\n            </el-switch>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- 分页 -->\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"currentPage\"\n        :page-sizes=\"[10, 15, 20, 30]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"totalCount\"\n        :disabled=\"loading\"\n      >\n      </el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getComment, updateComment } from \"@/api/comment\";\nexport default {\n  name: \"commentIndex\",\n  components: {},\n  props: {},\n  data() {\n    return {\n      tableData: [\n        {\n          date: \"2016-05-02\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1518 弄\",\n        },\n        {\n          date: \"2016-05-04\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1517 弄\",\n        },\n        {\n          date: \"2016-05-01\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1519 弄\",\n        },\n        {\n          date: \"2016-05-03\",\n          name: \"王小虎\",\n          address: \"上海市普陀区金沙江路 1516 弄\",\n        },\n      ],\n      commentList: [], //评论列表\n      currentPage: 1, //当前点击页码\n      totalCount: 0, //总条数\n      pageSize: 10, //每页条数\n      loading: false,\n    };\n  },\n  watch: {},\n  computed: {},\n  methods: {\n    async loadComment(page = 1) {\n      //防止数据紊乱\n      this.currentPage = page;\n      //开启加载状态\n      this.loading = true;\n      const { data: res } = await getComment({\n        page,\n        per_page: this.pageSize,\n        response_type: \"comment\",\n      });\n      this.totalCount = res.data.total_count;\n      const results = res.data.results;\n      //添加一个statusLoading开关加载状态,默认设置false,为了防止点击很多次发送多次请求\n      results.forEach((result) => {\n        result.statusLoading = false;\n      });\n      this.commentList = results;\n      this.loading = false;\n    },\n    async onStatusChange(scope) {\n      //开启开关加载状态,并禁用点击\n      scope.statusLoading = true;\n      await updateComment(\n        { article_id: scope.id.toString() },\n        { allow_comment: scope.comment_status }\n      );\n      this.$message({\n        message: scope.comment_status ? \"开启成功\" : \"关闭成功\",\n        type: \"success\",\n      });\n      //关闭加载状态\n      scope.statusLoading = false;\n    },\n    //根据每页大小进行分页\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.loadComment();\n    },\n    //分页\n    handleCurrentChange(page) {\n      this.loadComment(page);\n    },\n  },\n  created() {\n    this.loadComment();\n  },\n  mounted() {},\n};\n</script>\n<style lang=\"less\" scoped>\n.comment-container {\n  .table-list {\n    margin-bottom: 20px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8339e84a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=8339e84a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8339e84a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}